<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ASAP Jobs ‚Äì Get the best remote jobs sent to you</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #eef2ff;
      --bg-soft: #f5f5ff;
      --surface: #ffffff;
      --text-main: #020617;
      --text-muted: #6b7280;
      --accent: #2563eb;
      --accent-soft: #e0ebff;
      --success: #16a34a;
      --danger: #ef4444;
      --border: #e2e8f0;
      --border-soft: #e5e7eb;
      --pill-bg: #f9fafb;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.18);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #dbeafe 0, #e0f2fe 30%, #eef2ff 60%, #e5e7eb 100%);
      color: var(--text-main);
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 1.5rem 1.25rem 3rem;
    }

    /* Brand + hero (bigger, animated logo) */

    header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .brand-row {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.4rem;
    }

    .brand-logo {
      width: 168px;
      height: 168px;
      border-radius: 2.4rem;
      object-fit: contain;
      background: #0f172a;
      padding: 14px;
      box-shadow:
        0 26px 70px rgba(15, 23, 42, 0.7),
        0 0 0 1px rgba(148, 163, 184, 0.35);
      animation: logoFloat 7s ease-in-out infinite;
    }

    .brand-text-main {
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      font-weight: 800;
    }

    .brand-text-sub {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    .hero-title {
      font-size: clamp(2.5rem, 4.8vw, 3.2rem);
      font-weight: 800;
      letter-spacing: -0.06em;
      margin: 0 0 0.8rem;
      text-align: center;
    }

    .hero-title span.highlight {
      background: linear-gradient(120deg, #2563eb, #4f46e5);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .hero-subtitle {
      margin: 0 auto;
      margin-top: 0.4rem;
      font-size: 0.98rem;
      color: var(--text-muted);
      max-width: 640px;
      line-height: 1.7;
      text-align: center;
    }

    @keyframes logoFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-6px);
      }
    }

    /* Card */

    .card {
      margin-top: 1.75rem;
      background: var(--surface);
      border-radius: 1.4rem;
      padding: 1.5rem 1.25rem 1.75rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.15);
    }

    @media (min-width: 768px) {
      .card {
        padding: 1.75rem 2rem 2rem;
      }
    }

    .step-label {
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #22c55e;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .step-title {
      margin: 0 0 0.4rem;
      font-size: 1.05rem;
      font-weight: 700;
    }

    .step-copy {
      margin: 0 0 0.9rem;
      font-size: 0.88rem;
      color: var(--text-muted);
      max-width: 640px;
    }

    .pill-highlight {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      background: #ecfeff;
      color: #0369a1;
      font-size: 0.75rem;
      font-weight: 500;
      margin-bottom: 0.9rem;
    }

    /* Form basics */

    .field-row {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 0.9rem;
    }

    @media (min-width: 640px) {
      .field-row--2 {
        flex-direction: row;
      }
    }

    .field {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .field-label {
      font-size: 0.8rem;
      font-weight: 500;
    }

    .input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 0.7rem 0.9rem;
      font-size: 0.9rem;
      outline: none;
      background: #f9fafb;
      transition: border-color 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }

    .input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.22);
      background: #ffffff;
    }

    .input-error {
      border-color: var(--danger);
      box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.25);
    }

    /* Buttons */

    .btn {
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.4rem;
      padding: 0.7rem 1.4rem;
      white-space: nowrap;
      transition: transform 0.12s ease;
    }

    .btn-primary {
      background-image: linear-gradient(120deg, #22c55e, #16a34a, #22c55e);
      background-size: 200% 200%;
      color: #f9fafb;
      box-shadow: 0 14px 30px rgba(22, 163, 74, 0.45);
      animation:
        buttonGradient 4s ease-in-out infinite,
        buttonGlow 2.6s ease-in-out infinite;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-1px) scale(1.015);
      box-shadow: 0 18px 40px rgba(22, 163, 74, 0.55);
    }

    .btn-primary:disabled {
      opacity: 0.7;
      cursor: default;
      box-shadow: none;
      animation: none;
    }

    @keyframes buttonGradient {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes buttonGlow {
      0%, 100% {
        box-shadow: 0 14px 30px rgba(22, 163, 74, 0.45);
      }
      50% {
        box-shadow: 0 18px 45px rgba(22, 163, 74, 0.7);
      }
    }

    .step1-footer-text {
      margin: 0.55rem 0 0;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    /* Step separation */

    .step-divider {
      height: 1px;
      margin: 1.5rem 0 1.2rem;
      background: linear-gradient(to right, transparent, #e5e7eb, transparent);
    }

    /* Step 2 */

    .step2-header {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.4rem;
      align-items: baseline;
      margin-bottom: 0.7rem;
    }

    .step2-subcopy {
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    /* Horizontal filter tabs */

    .filter-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 0.9rem;
      padding-bottom: 0.2rem;
    }

    .filter-tab {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: var(--pill-bg);
      padding: 0.45rem 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      font-size: 0.85rem;
      white-space: nowrap;
      transition: border-color 0.12s ease, background 0.12s ease, box-shadow 0.12s ease,
        color 0.12s ease;
    }

    .filter-tab.active {
      border-color: var(--accent);
      background: #eef2ff;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.12);
    }

    .filter-icon {
      flex-shrink: 0;
    }

    .filter-tab-label {
      font-weight: 500;
    }

    .filter-tab-summary {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Missing filter highlight */

    .filter-tab.missing {
      border-color: #ef4444 !important;
      background: #fee2e2 !important;
      box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.3) !important;
      color: #b91c1c !important;
    }

    .filter-tab-missing-icon {
      font-size: 0.85rem;
      margin-left: 0.25rem;
    }

    /* Filter panel */

    .filter-panel {
      border-radius: 1rem;
      border: 1px solid var(--border);
      background: #f9fafb;
      padding: 0.75rem 0.9rem 0.8rem;
    }

    .filter-panel-top {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 0.5rem;
    }

    .filter-panel-label {
      font-size: 0.85rem;
      font-weight: 600;
    }

    .filter-panel-summary {
      font-size: 0.78rem;
      color: var(--text-muted);
      text-align: right;
      white-space: nowrap;
    }

    .filter-panel-search {
      margin-bottom: 0.35rem;
    }

    .dropdown-search {
      width: 100%;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      padding: 0.45rem 0.75rem;
      font-size: 0.84rem;
      outline: none;
      background: #f9fafb;
    }

    .dropdown-search:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.18);
      background: #ffffff;
    }

    .dropdown-body {
      padding: 0.25rem 0;
      max-height: 220px;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 0.45rem;
      padding: 0.35rem 0.75rem;
      font-size: 0.86rem;
      cursor: pointer;
    }

    .dropdown-item:hover {
      background: #f3f4ff;
    }

    .dropdown-item input {
      margin: 0;
    }

    .dropdown-item-label {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .dropdown-empty {
      padding: 0.5rem 0.9rem 0.75rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .hidden {
      display: none !important;
    }

    /* Salary row */

    .salary-row {
      margin-top: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.86rem;
    }

    .salary-row input {
      width: 16px;
      height: 16px;
    }

    .salary-label span {
      margin-right: 0.15rem;
    }

    .step2-footer-text {
      margin-top: 0.5rem;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    /* Final CTA */

    .cta-row {
      margin-top: 0.9rem;
    }

    .status-message {
      margin-top: 0.6rem;
      font-size: 0.82rem;
    }

    .status-message.success {
      color: var(--success);
    }

    .status-message.error {
      color: var(--danger);
    }

    /* Animated trust strip */

    .trust-strip {
      margin-top: 1.75rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.84rem;
    }

    .trust-strip strong {
      color: #111827;
      font-weight: 600;
    }

    .trust-logos {
      margin-top: 0.7rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.8rem;
    }

    .trust-logo {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      opacity: 0.7;
      font-weight: 600;
      animation: logoPulse 6s ease-in-out infinite;
    }

    .trust-logo:nth-child(2) {
      animation-delay: 0.8s;
    }

    .trust-logo:nth-child(3) {
      animation-delay: 1.6s;
    }

    .trust-logo:nth-child(4) {
      animation-delay: 2.4s;
    }

    .trust-logo:nth-child(5) {
      animation-delay: 3.2s;
    }

    .trust-logo:nth-child(6) {
      animation-delay: 4s;
    }

    @keyframes logoPulse {
      0%, 100% {
        transform: translateY(0);
        opacity: 0.65;
      }
      50% {
        transform: translateY(-3px);
        opacity: 1;
      }
    }

    /* Mobile tweaks */

    @media (max-width: 720px) {
      .filter-tabs {
        flex-wrap: nowrap;
        overflow-x: auto;
      }

      .brand-logo {
        width: 146px;
        height: 146px;
      }
    }

    @media (max-width: 600px) {
      .card {
        border-radius: 1.1rem;
        padding: 1.25rem 1rem 1.4rem;
      }

      .filter-panel-top {
        flex-direction: column;
        align-items: flex-start;
      }

      .trust-logos {
        gap: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- Brand + hero -->
    <header>
      <div class="brand-row">
        <!-- Make sure hero-logo.png exists next to index.html -->
        <img src="hero-logo.png" alt="ASAP Jobs logo" class="brand-logo" />
        <div>
          <div class="brand-text-main">ASAP JOBS</div>
          <div class="brand-text-sub">High-paying remote roles, delivered fast</div>
        </div>
      </div>

      <h1 class="hero-title">
        Get the <span class="highlight">best remote jobs</span> sent to you.
      </h1>
      <p class="hero-subtitle">
        Tell us your email once, then choose exactly what you‚Äôre looking for. We‚Äôll only send curated,
        high-paying remote roles that match your filters.
      </p>
    </header>

    <!-- Card -->
    <main class="card">
      <!-- STEP 1 -->
      <section>
        <div class="step-label">Step 1 ¬∑ Your email</div>
        <h2 class="step-title">Start your personalized job feed.</h2>
        <p class="step-copy">
          Pop in your first name and email. Next, we‚Äôll ask a few quick questions about location,
          experience, salary and job preferences so we only send you relevant roles.
        </p>
        <div class="pill-highlight">
          ‚ö° Hand-picked from hundreds of job boards & company pages
        </div>

        <div class="field-row field-row--2">
          <div class="field">
            <label class="field-label" for="firstNameInput">First name</label>
            <input
              id="firstNameInput"
              type="text"
              class="input"
              autocomplete="given-name"
              placeholder="Alex"
            />
          </div>
          <div class="field">
            <label class="field-label" for="emailInput">Email</label>
            <input
              id="emailInput"
              type="email"
              class="input"
              autocomplete="email"
              placeholder="you@example.com"
            />
          </div>
        </div>

        <button type="button" class="btn btn-primary" id="nextStepButton">
          Next: choose filters ‚ö°
        </button>

        <p class="step1-footer-text">
          We‚Äôll never share your email. Next step: we‚Äôll ask for your job preferences.
        </p>
      </section>

      <div class="step-divider"></div>

      <!-- STEP 2 -->
      <section id="step2" class="hidden">
        <div class="step-label">Step 2 ¬∑ Your job preferences</div>
        <div class="step2-header">
          <h2 class="step-title">Tell us what kind of roles you want.</h2>
          <p class="step2-subcopy">
            Choose at least one option for the filters marked with *. Benefits, technologies and languages are optional
            but help us personalize your job alerts.
          </p>
        </div>

        <!-- Horizontal filter tabs -->
        <div class="filter-tabs" id="filterTabs">
          <button type="button" class="filter-tab active" data-filter="locations">
            <span class="filter-icon">üåç</span>
            <span class="filter-tab-label">Location*</span>
            <span class="filter-tab-summary" data-tab-summary="locations">Any location</span>
          </button>
          <button type="button" class="filter-tab" data-filter="employment">
            <span class="filter-icon">üíº</span>
            <span class="filter-tab-label">Employment*</span>
            <span class="filter-tab-summary" data-tab-summary="employment">Select‚Ä¶</span>
          </button>
          <button type="button" class="filter-tab" data-filter="experience">
            <span class="filter-icon">‚≠ê</span>
            <span class="filter-tab-label">Experience*</span>
            <span class="filter-tab-summary" data-tab-summary="experience">Select‚Ä¶</span>
          </button>
          <button type="button" class="filter-tab" data-filter="jobCategories">
            <span class="filter-icon">üì¶</span>
            <span class="filter-tab-label">Job Category*</span>
            <span class="filter-tab-summary" data-tab-summary="jobCategories">Select‚Ä¶</span>
          </button>
          <button type="button" class="filter-tab" data-filter="benefits">
            <span class="filter-icon">üèñÔ∏è</span>
            <span class="filter-tab-label">Benefits</span>
            <span class="filter-tab-summary" data-tab-summary="benefits">Select‚Ä¶</span>
          </button>
          <button type="button" class="filter-tab" data-filter="technologies">
            <span class="filter-icon">üëæ</span>
            <span class="filter-tab-label">Technologies</span>
            <span class="filter-tab-summary" data-tab-summary="technologies">Select‚Ä¶</span>
          </button>
          <button type="button" class="filter-tab" data-filter="languages">
            <span class="filter-icon">üó£Ô∏è</span>
            <span class="filter-tab-label">Languages</span>
            <span class="filter-tab-summary" data-tab-summary="languages">Select‚Ä¶</span>
          </button>
        </div>

        <!-- Active filter panel -->
        <div class="filter-panel">
          <div class="filter-panel-top">
            <div class="filter-panel-label" id="filterPanelLabel">Location preferences</div>
            <div class="filter-panel-summary" id="filterPanelSummary">Any location</div>
          </div>
          <div class="filter-panel-search">
            <input
              type="text"
              id="filterSearchInput"
              class="dropdown-search"
              placeholder="Search locations‚Ä¶"
            />
          </div>
          <div id="filterOptionsBody" class="dropdown-body"></div>
        </div>

        <div class="salary-row">
          <input type="checkbox" id="highSalaryOnly" />
          <label for="highSalaryOnly" class="salary-label">
            <span>üí∞</span> High salary only ($100k+)
          </label>
        </div>

        <p class="step2-footer-text">
          No spam, ever. Unsubscribe in one click. You‚Äôll only receive remote jobs and occasional job-search tips from ASAP.
        </p>

        <div class="cta-row">
          <button type="button" id="subscribeButton" class="btn btn-primary">
            Get remote jobs ASAP ‚ö°
          </button>
          <p id="statusMessage" class="status-message"></p>
        </div>
      </section>
    </main>

    <!-- Trust strip -->
    <section class="trust-strip">
      <p>Join <strong>world-class talent</strong> hired at companies like:</p>
      <div class="trust-logos">
        <span class="trust-logo">Meta</span>
        <span class="trust-logo">Microsoft</span>
        <span class="trust-logo">Stripe</span>
        <span class="trust-logo">Airbnb</span>
        <span class="trust-logo">OpenAI</span>
        <span class="trust-logo">Shopify</span>
      </div>
    </section>
  </div>

  <script>
    // ---------- Filter data (with emojis + keywords) ----------

    const FILTER_OPTIONS = {
      locations: [
        { value: 'Remote', label: 'üè° Remote' },
        { value: 'Hybrid', label: 'üìç Hybrid' },
        { value: 'Worldwide', label: 'üåç Worldwide' },
        { value: 'North America', label: 'üåé North America' },
        { value: 'Latin America', label: 'üåé Latin America' },
        { value: 'Europe', label: 'üá™üá∫ Europe' },
        { value: 'EMEA', label: 'üåç EMEA' },
        { value: 'AMER', label: 'üåé AMER' },
        { value: 'APAC', label: 'üåè APAC' },
        { value: 'US', label: 'üá∫üá∏ United States' },
        { value: 'Canada', label: 'üá®üá¶ Canada' },
        { value: 'United Kingdom', label: 'üá¨üáß United Kingdom' },
        { value: 'Australia', label: 'üá¶üá∫ Australia' },
        { value: 'New Zealand', label: 'üá≥üáø New Zealand' },
        { value: 'Africa', label: 'ü¶Å Africa' },
        { value: 'Asia', label: 'üóº Asia' },
        { value: 'Oceania', label: 'üåä Oceania' }
      ],
      employment: [
        { value: 'Full-time', label: '‚è∞ Full-time' },
        { value: 'Part-time', label: '‚è±Ô∏è Part-time' },
        { value: 'Freelance', label: 'üßæ Freelance' },
        { value: 'Contract', label: 'üìÑ Contract' },
        { value: 'Temporary', label: 'üìÜ Temporary' },
        { value: '4-day week', label: 'üå¥ 4-day week' }
      ],
      experience: [
        { value: 'Entry Level', label: 'ü™¥ Entry Level', keywords: ['entry', 'junior', 'new grad', 'graduate'] },
        { value: 'Junior', label: 'üë∂ Junior', keywords: ['junior', 'jr'] },
        { value: 'Mid-Level', label: '‚≠ê Mid-Level', keywords: ['mid', 'intermediate'] },
        { value: 'Senior', label: 'üåü Senior', keywords: ['senior', 'sr'] },
        { value: 'Lead', label: 'üß≠ Lead', keywords: ['lead', 'principal'] },
        { value: 'Director', label: 'üéØ Director', keywords: ['director', 'head of'] },
        { value: 'Executive', label: 'üíº Executive', keywords: ['vp', 'c-level', 'chief', 'executive'] }
      ],
      jobCategories: [
        {
          value: 'Growth',
          label: 'üöÄ Growth (SEO / Paid)',
          keywords: [
            'seo', 'search', 'sem', 'paid', 'ppc', 'performance', 'performance marketing',
            'paid social', 'growth', 'growth marketer', 'growth marketing',
            'demand gen', 'user acquisition', 'ua'
          ]
        },
        {
          value: 'Marketing',
          label: 'üì£ Marketing (Brand / Content)',
          keywords: [
            'marketing', 'brand', 'brand marketing',
            'content', 'content writing', 'content marketing', 'content marketer',
            'copywriting', 'copywriter',
            'email marketing', 'newsletter', 'crm', 'lifecycle',
            'social media manager', 'community manager'
          ]
        },
        {
          value: 'Sales',
          label: 'üíº Sales',
          keywords: [
            'sales', 'sales rep', 'sales development', 'sdr', 'bdr',
            'account executive', 'ae', 'closer', 'inside sales',
            'outbound', 'inbound', 'account manager'
          ]
        },
        {
          value: 'Customer Success',
          label: 'üéß Customer Success / Support',
          keywords: [
            'customer success', 'cs', 'customer support', 'support',
            'cx', 'customer experience', 'implementation specialist'
          ]
        },
        {
          value: 'Analytics',
          label: 'üìä Data & Analytics',
          keywords: [
            'analytics', 'data analyst', 'business intelligence', 'bi',
            'data science', 'product analytics', 'marketing analytics',
            'experiment', 'a/b testing', 'ab testing'
          ]
        },
        {
          value: 'Engineering',
          label: 'üë®‚Äçüíª Engineering',
          keywords: [
            'software engineer', 'developer', 'frontend', 'front-end',
            'backend', 'back-end', 'fullstack', 'full stack',
            'mobile engineer', 'ios', 'android'
          ]
        },
        {
          value: 'Product',
          label: 'üì¶ Product Management',
          keywords: [
            'product manager', 'pm', 'product owner', 'group product manager', 'gpm', 'product lead'
          ]
        },
        {
          value: 'Design',
          label: 'üé® Design (Product / UI/UX)',
          keywords: [
            'designer', 'product design', 'ux', 'ui', 'ui/ux',
            'ux researcher', 'interaction design'
          ]
        },
        {
          value: 'Data',
          label: 'üß± Data Engineering / Platform',
          keywords: [
            'data engineer', 'analytics engineer', 'data platform', 'etl',
            'elt', 'dbt', 'data pipeline'
          ]
        },
        {
          value: 'DevOps',
          label: 'üîÅ DevOps / SRE / Platform',
          keywords: [
            'devops', 'sre', 'site reliability', 'platform engineer',
            'infrastructure', 'infra', 'cloud', 'kubernetes', 'k8s'
          ]
        },
        {
          value: 'Security',
          label: 'üîë Security',
          keywords: [
            'security engineer', 'appsec', 'application security', 'infosec', 'cybersecurity'
          ]
        },
        {
          value: 'Finance',
          label: 'üí∞ Finance / Accounting',
          keywords: [
            'finance', 'financial analyst', 'accountant', 'accounting',
            'fp&a', 'controller', 'cfo'
          ]
        },
        {
          value: 'Operations',
          label: '‚öôÔ∏è Operations / Strategy',
          keywords: [
            'operations', 'ops', 'bizops', 'business operations',
            'strategy', 'chief of staff', 'program manager'
          ]
        },
        {
          value: 'HR',
          label: 'üôã People / HR / Talent',
          keywords: [
            'recruiter', 'talent acquisition', 'ta', 'hr', 'people ops',
            'people operations', 'hr manager'
          ]
        },
        {
          value: 'Legal',
          label: '‚öñÔ∏è Legal',
          keywords: [
            'legal', 'counsel', 'lawyer', 'compliance'
          ]
        },
        {
          value: 'Executive',
          label: 'üèõÔ∏è Executive / Leadership',
          keywords: [
            'founder', 'co-founder', 'ceo', 'cto', 'cpo', 'cmo',
            'vp', 'head of', 'executive', 'c-suite'
          ]
        }
      ],
      benefits: [
        { value: 'Health insurance', label: 'ü©∫ Health insurance' },
        { value: 'Dental insurance', label: 'ü¶∑ Dental insurance' },
        { value: 'Vision insurance', label: 'üëì Vision insurance' },
        { value: 'Unlimited vacation', label: 'üèùÔ∏è Unlimited vacation' },
        { value: 'Paid time off', label: 'üìÖ Paid time off' },
        { value: '4 day workweek', label: 'üå¥ 4 day workweek' },
        { value: 'Company retreats', label: 'üèîÔ∏è Company retreats' },
        { value: 'Coworking budget', label: 'üè¢ Coworking budget' },
        { value: 'Learning budget', label: 'üìö Learning budget' },
        { value: 'Home office budget', label: 'üñ•Ô∏è Home office budget' },
        { value: 'Remote first', label: 'üåê Remote first' },
        { value: 'Flexible schedule', label: 'üßò Flexible schedule' },
        { value: 'Equity / Stocks', label: 'üìà Equity / Stocks' },
        { value: 'Profit sharing', label: 'üí∏ Profit sharing' }
      ],
      technologies: [
        // Web / frontend
        {
          value: 'JavaScript',
          label: '‚ú® JavaScript',
          keywords: ['js', 'frontend', 'front-end']
        },
        {
          value: 'TypeScript',
          label: 'üî∑ TypeScript',
          keywords: ['ts', 'typescript', 'typed javascript']
        },
        {
          value: 'React',
          label: '‚öõÔ∏è React',
          keywords: ['reactjs', 'react.js', 'frontend']
        },
        {
          value: 'Next.js',
          label: '‚è≠Ô∏è Next.js',
          keywords: ['nextjs', 'next', 'react']
        },
        {
          value: 'Vue.js',
          label: 'üñºÔ∏è Vue.js',
          keywords: ['vue', 'vuejs', 'frontend']
        },
        {
          value: 'Angular',
          label: 'üÖ∞Ô∏è Angular',
          keywords: ['angularjs', 'angular']
        },

        // Backend
        {
          value: 'Node.js',
          label: 'üü¢ Node.js',
          keywords: ['node', 'nodejs', 'backend', 'fullstack']
        },
        {
          value: 'Python',
          label: 'üêç Python',
          keywords: ['python', 'django', 'flask', 'fastapi']
        },
        {
          value: 'Ruby on Rails',
          label: 'üíé Ruby on Rails',
          keywords: ['ruby', 'rails', 'ror']
        },
        {
          value: 'Go',
          label: 'üêπ Go',
          keywords: ['golang', 'go']
        },
        {
          value: 'Java',
          label: '‚òï Java',
          keywords: ['java', 'spring', 'spring boot']
        },
        {
          value: 'C# / .NET',
          label: 'üíª C# / .NET',
          keywords: ['c#', '.net', 'dotnet']
        },
        {
          value: 'PHP / Laravel',
          label: 'üêò PHP / Laravel',
          keywords: ['php', 'laravel', 'symfony']
        },

        // Mobile
        {
          value: 'React Native',
          label: 'üì± React Native',
          keywords: ['react native', 'mobile', 'ios', 'android']
        },
        {
          value: 'Flutter',
          label: 'üì± Flutter',
          keywords: ['flutter', 'dart', 'mobile']
        },
        {
          value: 'iOS (Swift)',
          label: 'üì± iOS (Swift)',
          keywords: ['ios', 'swift', 'iphone']
        },
        {
          value: 'Android (Kotlin)',
          label: 'ü§ñ Android (Kotlin)',
          keywords: ['android', 'kotlin']
        },

        // Data
        {
          value: 'SQL',
          label: 'üßÆ SQL',
          keywords: ['sql', 'postgres', 'mysql']
        },
        {
          value: 'PostgreSQL',
          label: 'üêò PostgreSQL',
          keywords: ['postgresql', 'postgres', 'sql']
        },
        {
          value: 'MySQL',
          label: 'üíæ MySQL',
          keywords: ['mysql', 'sql']
        },
        {
          value: 'Snowflake',
          label: '‚ùÑÔ∏è Snowflake',
          keywords: ['snowflake', 'data warehouse']
        },
        {
          value: 'BigQuery',
          label: 'üìä BigQuery',
          keywords: ['bigquery', 'gcp', 'data warehouse']
        },
        {
          value: 'dbt',
          label: 'üß± dbt',
          keywords: ['dbt', 'analytics engineering']
        },

        // Cloud / DevOps
        {
          value: 'AWS',
          label: '‚òÅÔ∏è AWS',
          keywords: ['aws', 'amazon web services']
        },
        {
          value: 'GCP',
          label: '‚òÅÔ∏è GCP',
          keywords: ['gcp', 'google cloud']
        },
        {
          value: 'Azure',
          label: '‚òÅÔ∏è Azure',
          keywords: ['azure', 'microsoft azure']
        },
        {
          value: 'Docker',
          label: 'üê≥ Docker',
          keywords: ['docker', 'containers']
        },
        {
          value: 'Kubernetes',
          label: '‚ò∏Ô∏è Kubernetes',
          keywords: ['kubernetes', 'k8s']
        },
        {
          value: 'Terraform',
          label: 'üß± Terraform',
          keywords: ['terraform', 'iac', 'infrastructure as code']
        },
        {
          value: 'CI/CD',
          label: 'üîÅ CI/CD',
          keywords: ['ci', 'cd', 'github actions', 'gitlab ci', 'circleci']
        },

        // AI / ML
        {
          value: 'Machine Learning',
          label: 'ü§ñ Machine Learning',
          keywords: ['ml', 'machine learning', 'ml engineer', 'ml scientist']
        },
        {
          value: 'Deep Learning',
          label: 'üß† Deep Learning',
          keywords: ['deep learning', 'dl', 'neural networks']
        },
        {
          value: 'PyTorch',
          label: 'üî• PyTorch',
          keywords: ['pytorch']
        },
        {
          value: 'TensorFlow',
          label: 'üß† TensorFlow',
          keywords: ['tensorflow']
        },
        {
          value: 'LLMs / GenAI',
          label: '‚ú® LLMs / GenAI',
          keywords: ['llm', 'large language model', 'gpt', 'gen ai', 'generative ai']
        }
      ],
      languages: [
        { value: 'English', label: 'üá¨üáß English', keywords: ['english', 'en'] },
        { value: 'Spanish', label: 'üá™üá∏ Spanish', keywords: ['spanish', 'es', 'espa√±ol'] },
        { value: 'Portuguese', label: 'üáßüá∑ Portuguese', keywords: ['portuguese', 'pt', 'portugu√™s'] },
        { value: 'French', label: 'üá´üá∑ French', keywords: ['french', 'fr', 'fran√ßais'] },
        { value: 'German', label: 'üá©üá™ German', keywords: ['german', 'de', 'deutsch'] },
        { value: 'Italian', label: 'üáÆüáπ Italian', keywords: ['italian', 'it', 'italiano'] },
        { value: 'Dutch', label: 'üá≥üá± Dutch', keywords: ['dutch', 'nl', 'nederlands'] }
      ]
    };

    const filterState = {
      locations: [],
      employment: [],
      experience: [],
      jobCategories: [],
      benefits: [],
      technologies: [],
      languages: []
    };

    const FILTER_LABELS = {
      locations: "Location",
      employment: "Employment",
      experience: "Experience",
      jobCategories: "Job Category",
      benefits: "Benefits",
      technologies: "Technologies",
      languages: "Languages"
    };

    // Filters that MUST have at least one selection (others optional)
    const REQUIRED_FILTERS = ["locations", "employment", "experience", "jobCategories"];

    // ---------- Step 1: gate Step 2 ----------

    const firstNameInput = document.getElementById("firstNameInput");
    const emailInput = document.getElementById("emailInput");
    const nextStepButton = document.getElementById("nextStepButton");
    const step2Section = document.getElementById("step2");

    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    nextStepButton.addEventListener("click", () => {
      const firstName = firstNameInput.value.trim();
      const email = emailInput.value.trim();
      let hasError = false;

      if (!firstName) {
        firstNameInput.classList.add("input-error");
        hasError = true;
      } else {
        firstNameInput.classList.remove("input-error");
      }

      if (!email || !isValidEmail(email)) {
        emailInput.classList.add("input-error");
        hasError = true;
      } else {
        emailInput.classList.remove("input-error");
      }

      if (hasError) {
        alert("Please enter your first name and a valid email to continue.");
        return;
      }

      step2Section.classList.remove("hidden");
      step2Section.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // ---------- Horizontal filter tabs + panel ----------

    let activeFilterKey = "locations";
    let currentSearchTerm = "";

    const filterTabsEl = document.getElementById("filterTabs");
    const filterPanelLabelEl = document.getElementById("filterPanelLabel");
    const filterPanelSummaryEl = document.getElementById("filterPanelSummary");
    const filterSearchInput = document.getElementById("filterSearchInput");
    const filterOptionsBody = document.getElementById("filterOptionsBody");

    function baseSummaryForEmpty(key) {
      return key === "locations" ? "Any location" : "Select‚Ä¶";
    }

    function getSummaryForFilter(key) {
      const selected = filterState[key] || [];
      if (!selected.length) {
        return baseSummaryForEmpty(key);
      }
      const options = FILTER_OPTIONS[key] || [];
      const labels = options
        .filter((o) => selected.includes(o.value))
        .map((o) => o.label);
      return labels.join(" ¬∑ ");
    }

    function updateSummariesForFilter(key) {
      const summaryText = getSummaryForFilter(key);
      // Tab summary
      const tabSummarySpan = document.querySelector(
        `[data-tab-summary="${key}"]`
      );
      if (tabSummarySpan) tabSummarySpan.textContent = summaryText;

      // Panel summary (only if this filter is active)
      if (key === activeFilterKey && filterPanelSummaryEl) {
        filterPanelSummaryEl.textContent = summaryText;
      }

      // If this filter now has selections, clear missing state
      if (filterState[key] && filterState[key].length > 0) {
        const tab = document.querySelector(`.filter-tab[data-filter="${key}"]`);
        if (tab) {
          tab.classList.remove("missing");
          const icon = tab.querySelector(".filter-tab-missing-icon");
          if (icon) icon.remove();
        }
      }
    }

    function renderActiveFilterPanel() {
      const key = activeFilterKey;
      const options = FILTER_OPTIONS[key] || [];

      // Update label + summary + search placeholder
      filterPanelLabelEl.textContent = FILTER_LABELS[key] + " preferences";
      filterPanelSummaryEl.textContent = getSummaryForFilter(key);

      const placeholderMap = {
        locations: "Search locations‚Ä¶",
        employment: "Search employment types‚Ä¶",
        experience: "Search levels‚Ä¶",
        jobCategories: "Search job roles, categories‚Ä¶",
        benefits: "Search benefits‚Ä¶",
        technologies: "Search technologies‚Ä¶",
        languages: "Search languages‚Ä¶"
      };
      filterSearchInput.placeholder = placeholderMap[key] || "Search‚Ä¶";

      // Filtered options (label + value + keywords)
      const term = (currentSearchTerm || "").toLowerCase();
      const filtered = options.filter((opt) => {
        if (!term) return true;
        const label = (opt.label || "").toLowerCase();
        const value = (opt.value || "").toLowerCase();
        const keywords = (opt.keywords || []).join(" ").toLowerCase();
        return (
          label.includes(term) ||
          value.includes(term) ||
          keywords.includes(term)
        );
      });

      filterOptionsBody.innerHTML = "";

      if (!filtered.length) {
        const empty = document.createElement("div");
        empty.className = "dropdown-empty";
        empty.textContent = "No options match your search.";
        filterOptionsBody.appendChild(empty);
        return;
      }

      filtered.forEach((opt) => {
        const item = document.createElement("div");
        item.className = "dropdown-item";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = (filterState[key] || []).includes(opt.value);

        const label = document.createElement("span");
        label.className = "dropdown-item-label";
        label.textContent = opt.label;

        item.appendChild(checkbox);
        item.appendChild(label);

        item.addEventListener("click", () => {
          const current = new Set(filterState[key] || []);
          if (current.has(opt.value)) {
            current.delete(opt.value);
          } else {
            current.add(opt.value);
          }
          filterState[key] = Array.from(current);
          updateSummariesForFilter(key);
          renderActiveFilterPanel();
        });

        filterOptionsBody.appendChild(item);
      });
    }

    // Tab click behaviour
    filterTabsEl.querySelectorAll(".filter-tab").forEach((tab) => {
      tab.addEventListener("click", () => {
        const key = tab.getAttribute("data-filter");
        if (!key || key === activeFilterKey) return;
        activeFilterKey = key;
        currentSearchTerm = "";
        filterSearchInput.value = "";

        // Update tab active states
        filterTabsEl.querySelectorAll(".filter-tab").forEach((t) => {
          t.classList.toggle("active", t === tab);
        });

        renderActiveFilterPanel();
      });
    });

    // Search in active panel
    filterSearchInput.addEventListener("input", (e) => {
      currentSearchTerm = e.target.value;
      renderActiveFilterPanel();
    });

    // Initial render
    renderActiveFilterPanel();

    // ---------- Subscribe handler ----------

    const subscribeButton = document.getElementById("subscribeButton");
    const statusMessageEl = document.getElementById("statusMessage");
    const highSalaryToggle = document.getElementById("highSalaryOnly");

    subscribeButton.addEventListener("click", async () => {
      const firstName = firstNameInput.value.trim();
      const email = emailInput.value.trim();
      statusMessageEl.textContent = "";
      statusMessageEl.className = "status-message";

      // Validate email + name again
      if (!firstName || !isValidEmail(email)) {
        alert("Please enter your first name and a valid email first.");
        return;
      }

      // Clear previous error states on tabs
      document.querySelectorAll(".filter-tab").forEach(tab => {
        tab.classList.remove("missing");
        const oldIcon = tab.querySelector(".filter-tab-missing-icon");
        if (oldIcon) oldIcon.remove();
      });

      // Ensure at least one value per *required* filter (others stay optional)
      const missingFilters = REQUIRED_FILTERS.filter(
        (key) => !filterState[key] || filterState[key].length === 0
      );

      if (missingFilters.length) {
        // Highlight missing tabs
        missingFilters.forEach(key => {
          const tab = document.querySelector(`.filter-tab[data-filter="${key}"]`);
          if (tab) {
            tab.classList.add("missing");
            const icon = document.createElement("span");
            icon.className = "filter-tab-missing-icon";
            icon.textContent = "‚ùó";
            tab.appendChild(icon);
          }
        });

        // Scroll to the first missing tab
        const firstMissing = document.querySelector(
          `.filter-tab[data-filter="${missingFilters[0]}"]`
        );
        if (firstMissing) {
          firstMissing.scrollIntoView({ behavior: "smooth", inline: "center" });
        }

        return;
      }

      subscribeButton.disabled = true;

      const payload = {
        firstName,
        email,
        filters: filterState,
        highSalaryOnly: !!highSalaryToggle.checked
      };

      try {
        const resp = await fetch("/api/subscribe", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await resp.json().catch(() => ({}));

        if (!resp.ok) {
          const msg =
            data && data.error
              ? data.error
              : "Something went wrong subscribing. Please try again.";
          statusMessageEl.textContent = msg;
          statusMessageEl.classList.add("error");
        } else {
          statusMessageEl.textContent =
            "You‚Äôre in! Check your inbox for a confirmation email from ASAP.";
          statusMessageEl.classList.add("success");
        }
      } catch (err) {
        statusMessageEl.textContent =
          "Network error while subscribing. Please try again in a moment.";
        statusMessageEl.classList.add("error");
      } finally {
        subscribeButton.disabled = false;
      }
    });
  </script>
</body>
</html>
